# Структура проекта TOVCH (Digital Hand Holding Game)

## Корневая директория
- `package.json` - Основной конфигурационный файл проекта, определяет зависимости и скрипты для запуска клиента и сервера
- `package-lock.json` - Файл блокировки версий зависимостей npm
- `README.md` - Документация проекта с описанием игры, установкой и использованием
- `.gitignore` - Правила игнорирования файлов для Git
- `commit_changes.bat` - Пакетный файл для коммита изменений в Git

## Клиентская часть (client/)
- `index.html` - Главная HTML страница приложения с CSS стилями и структурой интерфейса
- `package.json` - Конфигурация зависимостей и скриптов для клиентской части
- `tsconfig.json` - Конфигурация TypeScript для клиентской части
- `vite.config.ts` - Конфигурация сборщика Vite для клиентского приложения
- `vitest.config.ts` - Конфигурация тестирования Vitest
- `vitest.setup.ts` - Настройка среды тестирования

### Клиентские исходники (client/src/)
- `main.ts` - Точка входа в приложение, инициализирует экземпляр игры
- `game.ts` - Основной класс игры, управляет логикой, рендерингом, соединениями и UI
- `__tests__/` - Тесты для клиентской части (если существуют)

#### Типы и схемы (client/src/types/)
- `schema.ts` - Определение типов TypeScript для схем данных (дублирует серверные схемы)
- `pixi-extend.d.ts` - Расширения типов для PixiJS
- `pixi-filters.d.ts` - Определения типов для фильтров PixiJS

## Серверная часть (server/)
- `package.json` - Конфигурация зависимостей и скриптов для серверной части
- `tsconfig.json` - Конфигурация TypeScript для серверной части

### Серверные исходники (server/src/)
- `index.ts` - Точка входа серверного приложения, настраивает Express и Colyseus
- `__tests__/` - Тесты для серверной части (если существуют)

#### Комнаты (server/src/rooms/)
- `HoldingRoom.ts` - Реализация комнаты для игры, обрабатывает подключения игроков и синхронизацию состояния
- `schema.ts` - Определение схем данных для синхронизации между клиентом и сервером (PlayerSchema, DraggableObjectSchema, RoomState)

## Описание основных файлов:

### client/index.html
HTML-шаблон приложения с CSS-стилями для ретро-интерфейса. Содержит структуру экранов (главный экран и игровой экран), элементы управления, чат и боковые панели.

### client/src/main.ts
Файл точки входа для клиентского приложения. Инициализирует экземпляр класса Game и обрабатывает события загрузки страницы и изменения размера окна.

### client/src/game.ts
Основной класс игры, реализующий всю игровую логику:
- Управление рендерингом через PixiJS
- Подключение к серверу через Colyseus
- Обработка пользовательского ввода (мышь, клавиатура)
- Синхронизация позиций курсоров между игроками
- Механика "держания за руки" и визуальные эффекты
- Управление UI элементами (боковые панели, чат, настройки)

### client/src/types/schema.ts
Определение типов TypeScript для схем данных, используемых в клиентской части. Эти типы соответствуют серверным схемам для обеспечения согласованности.

### server/src/index.ts
Точка входа серверного приложения. Создает HTTP-сервер, настраивает Express и Colyseus, регистрирует комнаты и запускает прослушивание порта.

### server/src/rooms/HoldingRoom.ts
Класс комнаты для игры, расширяющий базовый класс Room из Colyseus. Обрабатывает:
- Подключения и отключения игроков
- Валидацию и обработку сообщений от клиентов
- Синхронизацию состояния между игроками
- Логику "держания за руки" и другие игровые механики
- Автоматическую очистку пустых комнат

### server/src/rooms/schema.ts
Определение схем данных, используемых для синхронизации состояния между клиентом и сервером через Colyseus. Включает:
- PlayerSchema - данные об игроке (ID, имя, позиция, цвет и т.д.)
- DraggableObjectSchema - данные о перетаскиваемых объектах
- RoomState - общее состояние комнаты (игроки, объекты, параметры комнаты)

### client/vite.config.ts
Конфигурационный файл для Vite, указывает настройки сервера разработки (порт 3000) и параметры сборки.

### server/tsconfig.json
Конфигурация компиляции TypeScript для серверной части, включает настройки для Node.js и генерации JavaScript в папку dist.